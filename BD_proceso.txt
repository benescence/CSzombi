-- NUEVA BASE DE DATOS
create database revivir;
use revivir;

-- ESQUEMA CLIENTES
CREATE TABLE rev_clientes (
	ID INT(10) AUTO_INCREMENT,
	DNI VARCHAR(10) NULL,
	apellido VARCHAR(50) NOT NULL,
	nombre VARCHAR(100) NOT NULL,
	telefono VARCHAR(20) NULL,
	email VARCHAR(200) NULL,
	PRIMARY KEY (ID)
);

-- ESQUEMA TIPO DE FALLECIMIENTO
CREATE TABLE rev_tipo_fallecimiento (
	ID INT(1),
	descripcion VARCHAR(20) NOT NULL,
	PRIMARY KEY (ID)
);

-- ESQUEMAS SECTOR
CREATE TABLE rev_sector (
	ID INT(10) NOT NULL,
	descripcion VARCHAR(20) NOT NULL,
    PRIMARY KEY (ID)
);

-- ESQUEMAS SUB SECTOR
CREATE TABLE rev_sub_sector (
	ID INT(10) NOT NULL,
	sector INT(10) NOT NULL,
    descripcion VARCHAR(20) NOT NULL,
    PRIMARY KEY (ID),
	FOREIGN KEY (sector) REFERENCES rev_sector(ID)
);

-- ESQUEMAS UBICACIONES
CREATE TABLE rev_ubicaciones (
	ID INT(10) AUTO_INCREMENT,
	subsector INT(10) NOT NULL,
	deposito INT(1) NULL,
	otro_cementerio VARCHAR(11) NULL,
	osario VARCHAR(11) NULL,
	nicho VARCHAR(11) NULL,
	fila VARCHAR(11) NULL,
	seccion VARCHAR(10) NULL,
	macizo VARCHAR(10) NULL,
	unidad VARCHAR(10) NULL,
	bis VARCHAR(1) NULL,
	bis_macizo VARCHAR(11) NULL,
	numero VARCHAR(11) NULL,
	sepultura VARCHAR(10) NULL,
	parcela VARCHAR(11) NULL,
	mueble VARCHAR(11) NULL,
	inhumacion VARCHAR(20) NULL,
	circ VARCHAR(10) NULL,
	PRIMARY KEY (ID),
	FOREIGN KEY (subsector) REFERENCES rev_sub_sector(ID)
);

-- ESQUEMAS FALLECIDOS
CREATE TABLE rev_fallecidos (
	ID INT(10) AUTO_INCREMENT,
	cliente INT(10) NOT NULL,
	ubicacion INT(10) NOT NULL,
	DNI VARCHAR(11) NULL,
	apellido VARCHAR(50) NOT NULL,
	nombre VARCHAR(100) NOT NULL,
	fecha_fallecimiento DATE NOT NULL,
	tipo_fallecimiento INT(1) NOT NULL,
	cocheria VARCHAR(20) NULL,
	PRIMARY KEY (ID),
	FOREIGN KEY (cliente) REFERENCES rev_clientes(ID),
	FOREIGN KEY (ubicacion) REFERENCES rev_ubicaciones(ID),
	FOREIGN KEY (tipo_fallecimiento) REFERENCES rev_tipo_fallecimiento(ID),
);

-- INSERT TIPOS DE FALLECIMIENTO
INSERT INTO rev_tipo_fallecimiento (ID, descripcion) VALUES(1, "TRAUMATICO");
INSERT INTO rev_tipo_fallecimiento (ID, descripcion) VALUES(2, "NO TRAUMATICO");

-- INSERT SECTORES
INSERT INTO rev_sector (ID, descripcion) VALUES
(1, 'SEPULTURAS'),
(2, 'PALMERAS'),
(3, 'NICHERA'),
(4, 'CENIZARIO'),
(5, 'BOVEDA');

-- INSERT SUB SECTORES
INSERT INTO rev_sub_sector (ID, sector, descripcion) VALUES
(1, 1, 'SEPULTURAS'),
(2, 1, 'INDIGENTES'),
(3, 2, 'PALMERAS ATAUD'),
(4, 2, 'PALMERAS CENIZAS'),
(5, 2, 'PALMERAS RESTOS'),
(6, 2, 'PALMERAS SEPULTURA'),
(7, 3, 'NICHERA'),
(8, 4, 'CENIZARIO'),
(9, 5, 'BOVEDA');
